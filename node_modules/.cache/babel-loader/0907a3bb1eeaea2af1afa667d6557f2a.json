{"ast":null,"code":"var _jsxFileName = \"C:\\\\wamp64\\\\www\\\\my-app\\\\src\\\\components\\\\pages\\\\buys\\\\buys.js\";\nimport React, { Component, useContext, useEffect, useState } from 'react';\nimport axios from 'axios';\nimport Spinner from './../../spinner/spinner';\nimport { mainContext } from './../../../context/mainContext';\nimport { IconContext } from \"react-icons\";\nimport { AiOutlineDelete } from \"react-icons/ai\";\nimport { FaPlus, FaMinus } from \"react-icons/fa\";\nimport './buys.css';\n\nconst Buys = props => {\n  const {\n    userid,\n    login\n  } = useContext(mainContext);\n  const [buydata, setbuydata] = useState([]);\n  const [sumprices, setsumprices] = useState('');\n  const [showspinner, setshowspinner] = useState(false);\n  console.log(sumprices, 'kkk');\n  const id = localStorage.getItem('user');\n  useEffect(() => {\n    axios.get(`http://localhost:3000/user/buys/${id}`, {}).then(response => {\n      setbuydata(response.data);\n      let allprices = 0;\n      response.data.map(data => {\n        allprices += Number(data.prices) * data.Count;\n      });\n      setsumprices(allprices);\n    });\n  }, []);\n\n  const plusnumber = ({\n    userid,\n    idpost\n  }) => {\n    setshowspinner(true);\n    const dataa = {\n      id: idpost\n    };\n    const data = JSON.stringify(dataa);\n    axios.put(`http://localhost:3000/user/buys/plus/${userid}`, data, {}).then(response => {\n      if (response.status == 200) {\n        setshowspinner(false);\n        window.location.reload(true);\n      } else {\n        setshowspinner(false);\n      }\n    });\n  };\n\n  const subtractnumber = ({\n    userid,\n    idpost\n  }) => {\n    setshowspinner(true);\n    const dataa = {\n      id: idpost\n    };\n    const data = JSON.stringify(dataa);\n    axios.put(`http://localhost:3000/user/buys/subtract/${userid}`, data, {}).then(response => {\n      console.log(response, 'aaa');\n\n      if (response.status == 200) {\n        setshowspinner(false);\n        window.location.reload(true);\n      } else {\n        setshowspinner(false);\n      }\n    });\n  };\n\n  const deletebuy = ({\n    userid,\n    idpost\n  }) => {\n    setshowspinner(true);\n    const dataa = {\n      id: idpost\n    };\n    const data = JSON.stringify(dataa);\n    axios.delete(`http://localhost:3000/user/buys/delete/${userid}`, {\n      headers: {\n        \"id\": idpost\n      }\n    }).then(response => {\n      if (response.status == 200) {\n        setshowspinner(false);\n        window.location.reload(true);\n      } else {\n        setshowspinner(false);\n      }\n    });\n  };\n\n  const customer = () => {\n    props.history.push('/customerdetail');\n  };\n\n  {\n    if (login == true) {\n      return React.createElement(\"text\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, \"ljjlj\");\n    }\n  } //     return(\n  //       <div>\n  //         <div style={{display:login ?'none':'flex',marginTop:100,justifyContent:'center'}} className=\"nologin\">\n  //         <text>ابتدا به حساب کاربری خود وارد شوید</text>\n  //         </div>\n  //         <div style={{display:login?'flex':'none'}}  className=\"mainbuys\">\n  //         <div style={{display:buydata.length<1?'flex':'none',marginTop:100,justifyContent:'center'}}>\n  //             <text >سبدخرید شما خالیست</text>\n  //             </div>\n  //             <div className=\"spinner\"  style={{opacity:showspinner? 1 :0}}>\n  //       <Spinner/>\n  //       </div>\n  //             {buydata.map((data)=>\n  //             <div>\n  //           <div  className=\"buydetail\">\n  //               <div className=\"mainimagebuy\">\n  //           <img src=\"https://www.beytoote.com/images/stories/housekeeping/hou16389.jpg\" className=\"buysImage\" />\n  //           </div>\n  //           <div className=\"buystitle\">\n  //           <text className=\"buytitletext\"> <span style={{color:'#44bd32',fontWeight:'bold'}}>نام کالا:</span>{data.title}</text>\n  //             <text className=\"buytitletext\"><span style={{color:'#44bd32',fontWeight:'bold'}}>رنگ:</span>{data.color}</text>\n  //           </div>\n  //           <div className=\"buyprice\">\n  //               <text>قیمت:</text>\n  //           <text ><span style={{color:'#F79F1F',fontWeight:'bold'}}>{data.prices}</span> تومان</text>\n  //           <div style={{display:'flex',flexDirection:'column',alignItems:'center'}}>\n  //        {/* <div className=\"mainbuttonbuy\"> */}\n  //        <div className=\"buynumber\" >\n  //          <text>تعداد:</text>\n  //    <IconContext.Provider\n  //       value={{ color: '#F79F1F', size: '25px'}}>\n  //  <FaPlus   onClick={()=>plusnumber({userid:data.user,idpost:data._id})}/> \n  //     </IconContext.Provider>\n  //          <div className=\"inputnumber\">\n  //         <text>{data.Count}</text>\n  //         </div>\n  //        {/* <input defaultValue={data.Count} className=\"inputnumber\"/> */}\n  //        <div style={{display:data.Count >1 ?'flex':'none'}}>\n  //        <IconContext.Provider\n  //       value={{ color: '#F79F1F', size: '25px'}}>\n  //  <FaMinus   onClick={()=>subtractnumber({userid:data.user,idpost:data._id})}/> \n  //     </IconContext.Provider>\n  //     </div>\n  //     <div style={{display:data.Count ==1 ?'flex':'none'}}>\n  //        <IconContext.Provider\n  //       value={{ color: 'red', size: '25px'}}>\n  //  <AiOutlineDelete   onClick={()=>deletebuy({userid:data.user,idpost:data._id})}/> \n  //     </IconContext.Provider>\n  //     </div>\n  //        </div>\n  //     {/* <button  className=\"buttonbuy\"><text>{buyicon}</text>افزودن به سبد خرید</button> */}\n  //        {/* </div> */}\n  //        </div>\n  //           </div>\n  //           </div>\n  //        </div>\n  //           )}\n  //          <div style={{display:buydata.length<1?'none':'flex'}} className=\"buysprices\">\n  //            <text>جمع کل: {sumprices} تومان</text>\n  //            <button className=\"buyspricesbutton\" onClick={customer}>تصویه حساب</button>\n  //          </div>\n  //         </div> \n  //         </div>\n  //     )\n};\n\nexport default Buys;","map":{"version":3,"sources":["C:/wamp64/www/my-app/src/components/pages/buys/buys.js"],"names":["React","Component","useContext","useEffect","useState","axios","Spinner","mainContext","IconContext","AiOutlineDelete","FaPlus","FaMinus","Buys","props","userid","login","buydata","setbuydata","sumprices","setsumprices","showspinner","setshowspinner","console","log","id","localStorage","getItem","get","then","response","data","allprices","map","Number","prices","Count","plusnumber","idpost","dataa","JSON","stringify","put","status","window","location","reload","subtractnumber","deletebuy","delete","headers","customer","history","push"],"mappings":"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","sourcesContent":["import React, { Component,useContext,useEffect,useState } from 'react'\r\nimport axios from 'axios';\r\nimport Spinner from './../../spinner/spinner';\r\nimport {mainContext} from './../../../context/mainContext';\r\nimport { IconContext } from \"react-icons\";\r\nimport {AiOutlineDelete } from \"react-icons/ai\";\r\nimport { FaPlus,FaMinus } from \"react-icons/fa\";\r\nimport './buys.css';\r\nconst Buys=(props)=>{\r\n    const {userid,login}=useContext(mainContext)\r\n    const[buydata,setbuydata]=useState([]);\r\n    const[sumprices,setsumprices]=useState('');\r\n    const [showspinner,setshowspinner]=useState(false);\r\n    \r\n  console.log(sumprices,'kkk')\r\n\r\n    const id=localStorage.getItem('user')\r\n    useEffect(()=>{\r\n        axios.get(`http://localhost:3000/user/buys/${id}`, { \r\n        })\r\n        .then((response)=>{\r\n            setbuydata(response.data)\r\n            let allprices=0;\r\n            response.data.map((data)=>{\r\n              allprices += Number(data.prices)*data.Count; \r\n            })\r\n\r\nsetsumprices(allprices)\r\n        })\r\n    },[]);\r\n\r\n    const plusnumber=({userid,idpost})=>{\r\n      setshowspinner(true)\r\n       const dataa={\r\n            id:idpost,\r\n        }\r\n        const data=JSON.stringify(dataa)\r\n        axios.put(`http://localhost:3000/user/buys/plus/${userid}`,data ,{ \r\n        })\r\n        .then((response)=>{\r\n         if(response.status==200){\r\n          setshowspinner(false)\r\n          window.location.reload(true);\r\n         }\r\n         else{\r\n          setshowspinner(false)\r\n         } })\r\n      }\r\n      const subtractnumber=({userid,idpost})=>{\r\n        setshowspinner(true)\r\n        const dataa={\r\n             id:idpost,\r\n         }\r\n         const data=JSON.stringify(dataa)\r\n         axios.put(`http://localhost:3000/user/buys/subtract/${userid}`,data ,{ \r\n         })\r\n         .then((response)=>{\r\n           console.log(response,'aaa')\r\n          if(response.status==200){\r\n           setshowspinner(false)\r\n           window.location.reload(true);\r\n          }\r\n          else{\r\n           setshowspinner(false)\r\n          }\r\n \r\n         })\r\n      }\r\n    const  deletebuy=({userid,idpost})=>{\r\n      setshowspinner(true)\r\n   \r\n      const dataa={\r\n          id:idpost,\r\n       }\r\n       const data=JSON.stringify(dataa)\r\n       axios.delete(`http://localhost:3000/user/buys/delete/${userid}`,{headers: { \"id\": idpost } })\r\n       .then((response)=>{\r\n        \r\n        if(response.status==200){\r\n         setshowspinner(false)\r\n         window.location.reload(true);\r\n        }\r\n        else{\r\n         setshowspinner(false)\r\n        }\r\n\r\n       })\r\n    }\r\n   const  customer=()=>{\r\n    props.history.push('/customerdetail');\r\n   }\r\n {if(login==true){\r\n    return(\r\n<text>ljjlj</text>\r\n    )\r\n    \r\n  }}\r\n//     return(\r\n//       <div>\r\n//         <div style={{display:login ?'none':'flex',marginTop:100,justifyContent:'center'}} className=\"nologin\">\r\n//         <text>ابتدا به حساب کاربری خود وارد شوید</text>\r\n//         </div>\r\n//         <div style={{display:login?'flex':'none'}}  className=\"mainbuys\">\r\n//         <div style={{display:buydata.length<1?'flex':'none',marginTop:100,justifyContent:'center'}}>\r\n//             <text >سبدخرید شما خالیست</text>\r\n//             </div>\r\n//             <div className=\"spinner\"  style={{opacity:showspinner? 1 :0}}>\r\n//       <Spinner/>\r\n//       </div>\r\n//             {buydata.map((data)=>\r\n//             <div>\r\n            \r\n//           <div  className=\"buydetail\">\r\n//               <div className=\"mainimagebuy\">\r\n//           <img src=\"https://www.beytoote.com/images/stories/housekeeping/hou16389.jpg\" className=\"buysImage\" />\r\n//           </div>\r\n//           <div className=\"buystitle\">\r\n//           <text className=\"buytitletext\"> <span style={{color:'#44bd32',fontWeight:'bold'}}>نام کالا:</span>{data.title}</text>\r\n//             <text className=\"buytitletext\"><span style={{color:'#44bd32',fontWeight:'bold'}}>رنگ:</span>{data.color}</text>\r\n//           </div>\r\n//           <div className=\"buyprice\">\r\n//               <text>قیمت:</text>\r\n//           <text ><span style={{color:'#F79F1F',fontWeight:'bold'}}>{data.prices}</span> تومان</text>\r\n\r\n//           <div style={{display:'flex',flexDirection:'column',alignItems:'center'}}>\r\n//        {/* <div className=\"mainbuttonbuy\"> */}\r\n//        <div className=\"buynumber\" >\r\n//          <text>تعداد:</text>\r\n//    <IconContext.Provider\r\n//       value={{ color: '#F79F1F', size: '25px'}}>\r\n//  <FaPlus   onClick={()=>plusnumber({userid:data.user,idpost:data._id})}/> \r\n//     </IconContext.Provider>\r\n//          <div className=\"inputnumber\">\r\n//         <text>{data.Count}</text>\r\n//         </div>\r\n//        {/* <input defaultValue={data.Count} className=\"inputnumber\"/> */}\r\n//        <div style={{display:data.Count >1 ?'flex':'none'}}>\r\n//        <IconContext.Provider\r\n//       value={{ color: '#F79F1F', size: '25px'}}>\r\n//  <FaMinus   onClick={()=>subtractnumber({userid:data.user,idpost:data._id})}/> \r\n//     </IconContext.Provider>\r\n//     </div>\r\n//     <div style={{display:data.Count ==1 ?'flex':'none'}}>\r\n//        <IconContext.Provider\r\n//       value={{ color: 'red', size: '25px'}}>\r\n//  <AiOutlineDelete   onClick={()=>deletebuy({userid:data.user,idpost:data._id})}/> \r\n//     </IconContext.Provider>\r\n//     </div>\r\n//        </div>\r\n//     {/* <button  className=\"buttonbuy\"><text>{buyicon}</text>افزودن به سبد خرید</button> */}\r\n//        {/* </div> */}\r\n//        </div>\r\n//           </div>\r\n//           </div>\r\n//        </div>\r\n//           )}\r\n//          <div style={{display:buydata.length<1?'none':'flex'}} className=\"buysprices\">\r\n//            <text>جمع کل: {sumprices} تومان</text>\r\n//            <button className=\"buyspricesbutton\" onClick={customer}>تصویه حساب</button>\r\n//          </div>\r\n//         </div> \r\n//         </div>\r\n//     )\r\n}\r\nexport default Buys;"]},"metadata":{},"sourceType":"module"}